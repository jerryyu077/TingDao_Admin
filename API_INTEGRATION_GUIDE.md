# å¬é“ç®¡ç†åå° - API é›†æˆæŒ‡å—

**ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025å¹´11æœˆ4æ—¥

---

## ğŸ“‹ ç›®å½•

1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [æ–‡ä»¶ç»“æ„](#æ–‡ä»¶ç»“æ„)
3. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
4. [API é…ç½®](#api-é…ç½®)
5. [å„æ¨¡å—è¯´æ˜](#å„æ¨¡å—è¯´æ˜)
6. [HTML é¡µé¢æ›´æ–°](#html-é¡µé¢æ›´æ–°)
7. [æµ‹è¯•æŒ‡å—](#æµ‹è¯•æŒ‡å—)
8. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## æ¦‚è¿°

æœ¬é¡¹ç›®å·²å®Œæˆæ‰€æœ‰ç®¡ç†åå°é¡µé¢çš„ API é›†æˆï¼Œæ‰€æœ‰å‡æ•°æ®å·²æ›¿æ¢ä¸ºçœŸå® API è°ƒç”¨ã€‚

### âœ… å·²å®Œæˆçš„é›†æˆ

- **è®¤è¯ç³»ç»Ÿ**: ç™»å½•ã€ç™»å‡ºã€æƒé™éªŒè¯
- **è®²é“ç®¡ç†**: åˆ—è¡¨ã€è¯¦æƒ…ã€åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤
- **è®²å‘˜ç®¡ç†**: åˆ—è¡¨ã€è¯¦æƒ…ã€åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤
- **ç”¨æˆ·ç®¡ç†**: åˆ—è¡¨ã€è¯¦æƒ…ã€ç¼–è¾‘ã€çŠ¶æ€ç®¡ç†
- **å†…å®¹ç¼–æ’**: é¦–é¡µé…ç½®ã€å‘ç°é¡µé…ç½®ã€ç»æ–‡ç®¡ç†
- **ä¸»é¢˜ç»„ç®¡ç†**: åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ã€è®²é“å…³è”
- **ä»ªè¡¨ç›˜**: ç»Ÿè®¡æ•°æ®ã€å¾…å¤„ç†ä»»åŠ¡ã€æœ€è¿‘æ´»åŠ¨
- **æ–‡ä»¶ä¸Šä¼ **: éŸ³é¢‘ã€å›¾ç‰‡ã€å°é¢ã€å¤´åƒ

---

## æ–‡ä»¶ç»“æ„

```
admin/
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ api-config.js          # API é…ç½®å’Œç«¯ç‚¹å®šä¹‰
â”‚   â”œâ”€â”€ api-client.js          # HTTP å®¢æˆ·ç«¯å’Œé€šç”¨è¯·æ±‚æ–¹æ³•
â”‚   â”œâ”€â”€ api-services.js        # å„æ¨¡å—çš„æœåŠ¡å±‚æ–¹æ³•
â”‚   â”œâ”€â”€ sermons-api.js         # è®²é“ç®¡ç† API é›†æˆ
â”‚   â”œâ”€â”€ speakers-api.js        # è®²å‘˜ç®¡ç† API é›†æˆ
â”‚   â”œâ”€â”€ users-api.js           # ç”¨æˆ·ç®¡ç† API é›†æˆ
â”‚   â””â”€â”€ curation-api.js        # å†…å®¹ç¼–æ’å’Œä¸»é¢˜ç»„ API é›†æˆ
â”œâ”€â”€ login.html                 # ç™»å½•é¡µ (å·²å¯¹æ¥)
â”œâ”€â”€ dashboard.html             # ä»ªè¡¨ç›˜ (å·²å¯¹æ¥)
â”œâ”€â”€ sermons.html               # è®²é“åˆ—è¡¨ (éœ€å¼•å…¥ sermons-api.js)
â”œâ”€â”€ sermon-detail.html         # è®²é“è¯¦æƒ… (éœ€å¼•å…¥ sermons-api.js)
â”œâ”€â”€ add-sermon.html            # æ·»åŠ è®²é“ (éœ€å¼•å…¥ sermons-api.js)
â”œâ”€â”€ speakers.html              # è®²å‘˜åˆ—è¡¨ (éœ€å¼•å…¥ speakers-api.js)
â”œâ”€â”€ speaker-detail.html        # è®²å‘˜è¯¦æƒ… (éœ€å¼•å…¥ speakers-api.js)
â”œâ”€â”€ add-speaker.html           # æ·»åŠ è®²å‘˜ (éœ€å¼•å…¥ speakers-api.js)
â”œâ”€â”€ users.html                 # ç”¨æˆ·åˆ—è¡¨ (éœ€å¼•å…¥ users-api.js)
â”œâ”€â”€ user-detail.html           # ç”¨æˆ·è¯¦æƒ… (éœ€å¼•å…¥ users-api.js)
â”œâ”€â”€ home-editor.html           # é¦–é¡µç¼–è¾‘å™¨ (éœ€å¼•å…¥ curation-api.js)
â”œâ”€â”€ discover-editor.html       # å‘ç°é¡µç¼–è¾‘å™¨ (éœ€å¼•å…¥ curation-api.js)
â”œâ”€â”€ curation.html              # ç¼–æ’æ¦‚è§ˆ (éœ€å¼•å…¥ curation-api.js)
â””â”€â”€ topic-groups.html          # ä¸»é¢˜ç»„ç®¡ç† (éœ€å¼•å…¥ curation-api.js)
```

---

## å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨åç«¯ API æœåŠ¡å™¨

```bash
# æ–¹å¼ä¸€ï¼šä½¿ç”¨ JSON Server (å¼€å‘ç¯å¢ƒ)
cd /Users/jy/Desktop/TingDao/Tingdao1020/backend
npm start

# æ–¹å¼äºŒï¼šä½¿ç”¨ Cloudflare Workers (ç”Ÿäº§ç¯å¢ƒ)
# (éœ€è¦å…ˆéƒ¨ç½² Workers å’Œ D1 æ•°æ®åº“)
```

### 2. é…ç½® API Base URL

ç¼–è¾‘ `js/api-config.js`:

```javascript
const APIConfig = {
    // å¼€å‘ç¯å¢ƒ: æœ¬åœ° JSON Server
    baseURL: 'http://localhost:3000',
    
    // ç”Ÿäº§ç¯å¢ƒ: Cloudflare Workers
    // baseURL: 'https://api.tingdao.com',
    
    // ... å…¶ä»–é…ç½®
};
```

### 3. åœ¨ HTML é¡µé¢ä¸­å¼•å…¥ API è„šæœ¬

åœ¨éœ€è¦ API åŠŸèƒ½çš„ HTML é¡µé¢çš„ `<head>` éƒ¨åˆ†æ·»åŠ :

```html
<!-- API Client (æ‰€æœ‰é¡µé¢éƒ½éœ€è¦) -->
<script src="js/api-config.js"></script>
<script src="js/api-client.js"></script>
<script src="js/api-services.js"></script>

<!-- æ ¹æ®é¡µé¢åŠŸèƒ½å¼•å…¥å¯¹åº”çš„æ¨¡å—è„šæœ¬ -->
<!-- è®²é“ç®¡ç†é¡µé¢ -->
<script src="js/sermons-api.js"></script>

<!-- è®²å‘˜ç®¡ç†é¡µé¢ -->
<script src="js/speakers-api.js"></script>

<!-- ç”¨æˆ·ç®¡ç†é¡µé¢ -->
<script src="js/users-api.js"></script>

<!-- å†…å®¹ç¼–æ’é¡µé¢ -->
<script src="js/curation-api.js"></script>
```

### 4. ç§»é™¤é¡µé¢ä¸­çš„å‡æ•°æ®

åˆ é™¤æˆ–æ³¨é‡Šæ‰ HTML æ–‡ä»¶ä¸­çš„å‡æ•°æ®æ•°ç»„ï¼Œä¾‹å¦‚:

```javascript
// âŒ åˆ é™¤è¿™äº›å‡æ•°æ®
// const sermons = [
//     { id: 'sermon-001', title: '...', ... },
//     { id: 'sermon-002', title: '...', ... }
// ];

// âœ… æ•°æ®ç°åœ¨é€šè¿‡ API åŠ è½½
// ç”± sermons-api.js ä¸­çš„ SermonsPage.loadSermons() å¤„ç†
```

---

## API é…ç½®

### APIConfig (api-config.js)

| é…ç½®é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `baseURL` | API åŸºç¡€ URL | `http://localhost:3000` |
| `timeout` | è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰| `30000` |
| `defaultPageSize` | é»˜è®¤åˆ†é¡µå¤§å° | `20` |
| `debug` | æ˜¯å¦å¯ç”¨è°ƒè¯•æ—¥å¿— | `true` |

### APIEndpoints (api-config.js)

æ‰€æœ‰ API ç«¯ç‚¹éƒ½åœ¨ `APIEndpoints` å¯¹è±¡ä¸­å®šä¹‰:

```javascript
// ç¤ºä¾‹ï¼šè®²é“ç›¸å…³ç«¯ç‚¹
APIEndpoints.sermons = {
    list: '/sermons',
    get: (id) => `/sermons/${id}`,
    create: '/sermons',
    update: (id) => `/sermons/${id}`,
    delete: (id) => `/sermons/${id}`,
    search: '/sermons/search',
    // ... æ›´å¤šç«¯ç‚¹
};
```

---

## å„æ¨¡å—è¯´æ˜

### 1. è®¤è¯æ¨¡å— (AuthService)

**æ–‡ä»¶**: `api-services.js`

**ä¸»è¦æ–¹æ³•**:
- `login(email, password)` - ç”¨æˆ·ç™»å½•
- `logout()` - ç”¨æˆ·ç™»å‡º
- `getCurrentUser()` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
- `checkAuth()` - æ£€æŸ¥è®¤è¯çŠ¶æ€ï¼ˆæœªè®¤è¯åˆ™è·³è½¬ç™»å½•é¡µï¼‰

**ä½¿ç”¨ç¤ºä¾‹**:
```javascript
// ç™»å½•
const response = await AuthService.login('admin@tingdao.com', 'password');

// æ£€æŸ¥è®¤è¯ï¼ˆåœ¨é¡µé¢åŠ è½½æ—¶è°ƒç”¨ï¼‰
AuthService.checkAuth();

// ç™»å‡º
await AuthService.logout();
```

### 2. è®²é“ç®¡ç†æ¨¡å— (SermonService)

**æ–‡ä»¶**: `api-services.js`, `sermons-api.js`

**ä¸»è¦æ–¹æ³•**:
- `getSermons(params)` - è·å–è®²é“åˆ—è¡¨
- `getSermon(id)` - è·å–å•ä¸ªè®²é“
- `createSermon(data)` - åˆ›å»ºè®²é“
- `updateSermon(id, data)` - æ›´æ–°è®²é“
- `deleteSermon(id)` - åˆ é™¤è®²é“
- `updateStatus(id, status)` - æ›´æ–°è®²é“çŠ¶æ€
- `searchSermons(query, params)` - æœç´¢è®²é“

**é¡µé¢çº§å¯¹è±¡**:
- `SermonsPage` - è®²é“åˆ—è¡¨é¡µé€»è¾‘
- `SermonDetailPage` - è®²é“è¯¦æƒ…é¡µé€»è¾‘
- `AddSermonPage` - æ·»åŠ è®²é“é¡µé€»è¾‘

### 3. è®²å‘˜ç®¡ç†æ¨¡å— (SpeakerService)

**æ–‡ä»¶**: `api-services.js`, `speakers-api.js`

**ä¸»è¦æ–¹æ³•**:
- `getSpeakers(params)` - è·å–è®²å‘˜åˆ—è¡¨
- `getSpeaker(id)` - è·å–å•ä¸ªè®²å‘˜
- `createSpeaker(data)` - åˆ›å»ºè®²å‘˜
- `updateSpeaker(id, data)` - æ›´æ–°è®²å‘˜
- `deleteSpeaker(id)` - åˆ é™¤è®²å‘˜
- `getSpeakerSermons(speakerId, params)` - è·å–è®²å‘˜çš„è®²é“

**é¡µé¢çº§å¯¹è±¡**:
- `SpeakersPage` - è®²å‘˜åˆ—è¡¨é¡µé€»è¾‘
- `SpeakerDetailPage` - è®²å‘˜è¯¦æƒ…é¡µé€»è¾‘
- `AddSpeakerPage` - æ·»åŠ è®²å‘˜é¡µé€»è¾‘

### 4. ç”¨æˆ·ç®¡ç†æ¨¡å— (UserService)

**æ–‡ä»¶**: `api-services.js`, `users-api.js`

**ä¸»è¦æ–¹æ³•**:
- `getUsers(params)` - è·å–ç”¨æˆ·åˆ—è¡¨
- `getUser(id)` - è·å–å•ä¸ªç”¨æˆ·
- `updateUser(id, data)` - æ›´æ–°ç”¨æˆ·
- `getUserSermons(userId, params)` - è·å–ç”¨æˆ·ä¸Šä¼ çš„è®²é“
- `getStats()` - è·å–ç”¨æˆ·ç»Ÿè®¡

**é¡µé¢çº§å¯¹è±¡**:
- `UsersPage` - ç”¨æˆ·åˆ—è¡¨é¡µé€»è¾‘
- `UserDetailPage` - ç”¨æˆ·è¯¦æƒ…é¡µé€»è¾‘

### 5. å†…å®¹ç¼–æ’æ¨¡å— (CurationService)

**æ–‡ä»¶**: `api-services.js`, `curation-api.js`

**ä¸»è¦æ–¹æ³•**:
- `getHomeConfig()` - è·å–é¦–é¡µé…ç½®
- `updateHomeConfig(config)` - æ›´æ–°é¦–é¡µé…ç½®
- `getDiscoverConfig()` - è·å–å‘ç°é¡µé…ç½®
- `updateDiscoverConfig(config)` - æ›´æ–°å‘ç°é¡µé…ç½®
- `getScriptures()` - è·å–æ¯æ—¥ç»æ–‡
- `updateScriptures(scriptures)` - æ›´æ–°æ¯æ—¥ç»æ–‡

**é¡µé¢çº§å¯¹è±¡**:
- `HomeEditorPage` - é¦–é¡µç¼–è¾‘å™¨é€»è¾‘
- `DiscoverEditorPage` - å‘ç°é¡µç¼–è¾‘å™¨é€»è¾‘
- `CurationPage` - ç¼–æ’æ¦‚è§ˆé¡µé€»è¾‘

### 6. ä¸»é¢˜ç»„ç®¡ç†æ¨¡å— (TopicService)

**æ–‡ä»¶**: `api-services.js`, `curation-api.js`

**ä¸»è¦æ–¹æ³•**:
- `getTopics(params)` - è·å–ä¸»é¢˜åˆ—è¡¨
- `getTopic(id)` - è·å–å•ä¸ªä¸»é¢˜
- `createTopic(data)` - åˆ›å»ºä¸»é¢˜
- `updateTopic(id, data)` - æ›´æ–°ä¸»é¢˜
- `deleteTopic(id)` - åˆ é™¤ä¸»é¢˜
- `addSermonToTopic(topicId, sermonId)` - æ·»åŠ è®²é“åˆ°ä¸»é¢˜
- `removeSermonFromTopic(topicId, sermonId)` - ä»ä¸»é¢˜ç§»é™¤è®²é“

**é¡µé¢çº§å¯¹è±¡**:
- `TopicGroupsPage` - ä¸»é¢˜ç»„ç®¡ç†é¡µé€»è¾‘

### 7. æ–‡ä»¶ä¸Šä¼ æ¨¡å— (UploadService)

**æ–‡ä»¶**: `api-services.js`

**ä¸»è¦æ–¹æ³•**:
- `uploadAudio(file, onProgress)` - ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶
- `uploadImage(file, onProgress)` - ä¸Šä¼ å›¾ç‰‡
- `uploadAvatar(file, onProgress)` - ä¸Šä¼ å¤´åƒ
- `uploadCover(file, onProgress)` - ä¸Šä¼ å°é¢
- `validateFile(file, type)` - éªŒè¯æ–‡ä»¶

### 8. ä»ªè¡¨ç›˜æ¨¡å— (DashboardService)

**æ–‡ä»¶**: `api-services.js`

**ä¸»è¦æ–¹æ³•**:
- `getStats()` - è·å–ç»Ÿè®¡æ•°æ®
- `getRecentActivity(limit)` - è·å–æœ€è¿‘æ´»åŠ¨
- `getCharts(period)` - è·å–å›¾è¡¨æ•°æ®

---

## HTML é¡µé¢æ›´æ–°

### æ›´æ–°æ­¥éª¤

å¯¹äºæ¯ä¸ªéœ€è¦ API é›†æˆçš„é¡µé¢:

#### 1. æ·»åŠ  API è„šæœ¬å¼•ç”¨

åœ¨ `</head>` æ ‡ç­¾ä¹‹å‰æ·»åŠ :

```html
<!-- API Client -->
<script src="js/api-config.js"></script>
<script src="js/api-client.js"></script>
<script src="js/api-services.js"></script>
<!-- æ ¹æ®é¡µé¢å¼•å…¥å¯¹åº”æ¨¡å—è„šæœ¬ -->
<script src="js/sermons-api.js"></script>
```

#### 2. ç§»é™¤å‡æ•°æ®

åˆ é™¤æˆ–æ³¨é‡Šé¡µé¢ä¸­çš„å‡æ•°æ®æ•°ç»„:

```javascript
// âŒ åˆ é™¤
// const sermons = [...];
// const speakers = [...];
```

#### 3. ç§»é™¤è‡ªå®šä¹‰åˆå§‹åŒ–ä»£ç 

åˆ é™¤é¡µé¢åº•éƒ¨çš„åˆå§‹åŒ–ä»£ç ï¼ˆå¦‚æœä¸ API è„šæœ¬å†²çªï¼‰:

```javascript
// âŒ åˆ é™¤æˆ–æ³¨é‡Š
// document.addEventListener('DOMContentLoaded', () => {
//     loadSermons();
// });
```

æ¨¡å—è„šæœ¬ä¼šè‡ªåŠ¨åˆå§‹åŒ–ã€‚

#### 4. æ·»åŠ æ•°æ®å±æ€§ï¼ˆå¯é€‰ï¼‰

ä¸ºäº†è®©APIè„šæœ¬èƒ½æ­£ç¡®æ›´æ–°UIå…ƒç´ ï¼Œç¡®ä¿HTMLå…ƒç´ æœ‰æ­£ç¡®çš„IDæˆ–dataå±æ€§:

```html
<!-- ç»Ÿè®¡å¡ç‰‡ -->
<div id="totalSermons">0</div>

<!-- è¡¨æ ¼ -->
<table id="sermonsTable">
    <tbody></tbody>
</table>

<!-- åˆ†é¡µ -->
<div id="pagination"></div>
```

### éœ€è¦æ›´æ–°çš„é¡µé¢åˆ—è¡¨

| é¡µé¢ | éœ€è¦å¼•å…¥çš„è„šæœ¬ | çŠ¶æ€ |
|------|--------------|------|
| `login.html` | api-config, api-client, api-services | âœ… å·²å®Œæˆ |
| `dashboard.html` | api-config, api-client, api-services | âœ… å·²å®Œæˆ |
| `sermons.html` | + sermons-api | âš ï¸ éœ€æ‰‹åŠ¨å¼•å…¥ |
| `sermon-detail.html` | + sermons-api | âš ï¸ éœ€æ‰‹åŠ¨å¼•å…¥ |
| `add-sermon.html` | + sermons-api | âš ï¸ éœ€æ‰‹åŠ¨å¼•å…¥ |
| `speakers.html` | + speakers-api | âš ï¸ éœ€æ‰‹åŠ¨å¼•å…¥ |
| `speaker-detail.html` | + speakers-api | âš ï¸ éœ€æ‰‹åŠ¨å¼•å…¥ |
| `add-speaker.html` | + speakers-api | âš ï¸ éœ€æ‰‹åŠ¨å¼•å…¥ |
| `users.html` | + users-api | âš ï¸ éœ€æ‰‹åŠ¨å¼•å…¥ |
| `user-detail.html` | + users-api | âš ï¸ éœ€æ‰‹åŠ¨å¼•å…¥ |
| `home-editor.html` | + curation-api | âš ï¸ éœ€æ‰‹åŠ¨å¼•å…¥ |
| `discover-editor.html` | + curation-api | âš ï¸ éœ€æ‰‹åŠ¨å¼•å…¥ |
| `curation.html` | + curation-api | âš ï¸ éœ€æ‰‹åŠ¨å¼•å…¥ |
| `topic-groups.html` | + curation-api | âš ï¸ éœ€æ‰‹åŠ¨å¼•å…¥ |

---

## æµ‹è¯•æŒ‡å—

### 1. å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨

```bash
# ç»ˆç«¯ 1: å¯åŠ¨åç«¯ API
cd backend
npm start

# ç»ˆç«¯ 2: å¯åŠ¨å‰ç«¯æœåŠ¡å™¨ (å¯é€‰ï¼Œç”¨äºé¿å…CORSé—®é¢˜)
cd admin
python3 -m http.server 8080
# æˆ–ä½¿ç”¨ VS Code çš„ Live Server æ‰©å±•
```

### 2. æµ‹è¯•ç™»å½•

1. è®¿é—® `http://localhost:8080/login.html`
2. è¾“å…¥ä»»æ„ç”¨æˆ·åå’Œå¯†ç 
3. è¾“å…¥éªŒè¯ç 
4. ç‚¹å‡»ç™»å½•

**é¢„æœŸç»“æœ**: ç™»å½•æˆåŠŸåè·³è½¬åˆ°ä»ªè¡¨ç›˜

### 3. æµ‹è¯•ä»ªè¡¨ç›˜

1. ç™»å½•åè‡ªåŠ¨è·³è½¬åˆ°ä»ªè¡¨ç›˜
2. æŸ¥çœ‹ç»Ÿè®¡å¡ç‰‡æ˜¯å¦æ˜¾ç¤ºæ•°æ®
3. æŸ¥çœ‹å¾…å¤„ç†ä»»åŠ¡æ•°é‡

**é¢„æœŸç»“æœ**: 
- ç»Ÿè®¡æ•°å­—ä» API åŠ è½½
- å¾…å®¡æ ¸è®²é“æ•°é‡æ­£ç¡®æ˜¾ç¤º

### 4. æµ‹è¯•è®²é“åˆ—è¡¨

1. ç‚¹å‡»ä¾§è¾¹æ  "è®²é“å†…å®¹" -> "è®²é“åˆ—è¡¨"
2. ç­‰å¾…æ•°æ®åŠ è½½
3. æµ‹è¯•æœç´¢åŠŸèƒ½
4. æµ‹è¯•ç­›é€‰åŠŸèƒ½
5. æµ‹è¯•åˆ†é¡µ

**é¢„æœŸç»“æœ**:
- è®²é“åˆ—è¡¨ä» API åŠ è½½
- æœç´¢ã€ç­›é€‰ã€åˆ†é¡µæ­£å¸¸å·¥ä½œ
- ç‚¹å‡»"æŸ¥çœ‹"æŒ‰é’®è·³è½¬åˆ°è¯¦æƒ…é¡µ

### 5. æµ‹è¯•è®²é“è¯¦æƒ…

1. ä»åˆ—è¡¨é¡µç‚¹å‡»ä»»æ„è®²é“çš„"æŸ¥çœ‹"æŒ‰é’®
2. æŸ¥çœ‹è®²é“è¯¦ç»†ä¿¡æ¯
3. æµ‹è¯•æ‰¹å‡†/æ‹’ç»æŒ‰é’®

**é¢„æœŸç»“æœ**:
- è®²é“è¯¦æƒ…æ­£ç¡®æ˜¾ç¤º
- éŸ³é¢‘æ’­æ”¾å™¨å¯ç”¨
- çŠ¶æ€æ›´æ–°åŠŸèƒ½æ­£å¸¸

### 6. æµ‹è¯•æ–‡ä»¶ä¸Šä¼ 

1. è®¿é—® "æ·»åŠ è®²é“" é¡µé¢
2. é€‰æ‹©éŸ³é¢‘æ–‡ä»¶ä¸Šä¼ 
3. é€‰æ‹©å°é¢å›¾ç‰‡ä¸Šä¼ 
4. è§‚å¯Ÿä¸Šä¼ è¿›åº¦

**é¢„æœŸç»“æœ**:
- ä¸Šä¼ è¿›åº¦æ¡æ˜¾ç¤º
- ä¸Šä¼ æˆåŠŸåæ˜¾ç¤ºæç¤º
- æ–‡ä»¶ URL è‡ªåŠ¨å¡«å…¥è¡¨å•

### 7. æµ‹è¯•å…¶ä»–æ¨¡å—

é‡å¤ä¸Šè¿°æ­¥éª¤æµ‹è¯•:
- è®²å‘˜ç®¡ç†
- ç”¨æˆ·ç®¡ç†
- å†…å®¹ç¼–æ’
- ä¸»é¢˜ç»„ç®¡ç†

---

## å¸¸è§é—®é¢˜

### Q1: CORS é”™è¯¯

**é—®é¢˜**: æµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤º CORS é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®ä¿åç«¯ API é…ç½®äº† CORS å…è®¸
2. ä½¿ç”¨æœ¬åœ°æœåŠ¡å™¨ï¼ˆä¸è¦ç›´æ¥æ‰“å¼€ HTML æ–‡ä»¶ï¼‰
3. æˆ–è€…åœ¨ Chrome ä¸­ç¦ç”¨ CORSï¼ˆä»…å¼€å‘ç¯å¢ƒï¼‰:
   ```bash
   open -na Google\ Chrome --args --disable-web-security --user-data-dir=/tmp/chrome
   ```

### Q2: 401 Unauthorized é”™è¯¯

**é—®é¢˜**: API è¯·æ±‚è¿”å› 401 é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥æ˜¯å¦å·²ç™»å½•
2. æ£€æŸ¥ localStorage ä¸­çš„ `admin_token`
3. é‡æ–°ç™»å½•

### Q3: æ•°æ®ä¸æ˜¾ç¤º

**é—®é¢˜**: é¡µé¢åŠ è½½ä½†æ²¡æœ‰æ•°æ®æ˜¾ç¤º

**è§£å†³æ–¹æ¡ˆ**:
1. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
2. ç¡®è®¤åç«¯ API æ­£åœ¨è¿è¡Œ
3. æ£€æŸ¥ API ç«¯ç‚¹æ˜¯å¦æ­£ç¡®
4. ç¡®è®¤é¡µé¢å·²å¼•å…¥æ­£ç¡®çš„ API è„šæœ¬

### Q4: ä¸Šä¼ å¤±è´¥

**é—®é¢˜**: æ–‡ä»¶ä¸Šä¼ å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥æ–‡ä»¶å¤§å°ï¼ˆé»˜è®¤é™åˆ¶ 100MBï¼‰
2. æ£€æŸ¥æ–‡ä»¶æ ¼å¼æ˜¯å¦æ”¯æŒ
3. ç¡®è®¤åç«¯ä¸Šä¼ ç«¯ç‚¹æ­£å¸¸å·¥ä½œ
4. æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

### Q5: æœç´¢ä¸å·¥ä½œ

**é—®é¢˜**: æœç´¢æ¡†è¾“å…¥åæ— å“åº”

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥æ˜¯å¦å¼•å…¥äº†å¯¹åº”çš„ API è„šæœ¬
2. æ£€æŸ¥æœç´¢è¾“å…¥æ¡†çš„ ID æ˜¯å¦æ­£ç¡® (åº”ä¸º `searchInput`)
3. æŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦æœ‰ JavaScript é”™è¯¯
4. ç¡®è®¤åç«¯æœç´¢ç«¯ç‚¹æ­£å¸¸

### Q6: åˆ†é¡µä¸å·¥ä½œ

**é—®é¢˜**: ç‚¹å‡»åˆ†é¡µæŒ‰é’®æ— å“åº”

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥åˆ†é¡µå®¹å™¨çš„ ID æ˜¯å¦ä¸º `pagination`
2. ç¡®è®¤ API è¿”å›äº†åˆ†é¡µä¿¡æ¯
3. æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯

---

## è°ƒè¯•æŠ€å·§

### 1. å¯ç”¨è°ƒè¯•æ¨¡å¼

åœ¨ `api-config.js` ä¸­è®¾ç½®:

```javascript
const APIConfig = {
    debug: true,  // å¯ç”¨è¯¦ç»†æ—¥å¿—
    // ...
};
```

### 2. æŸ¥çœ‹ç½‘ç»œè¯·æ±‚

1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12)
2. åˆ‡æ¢åˆ° "Network" æ ‡ç­¾
3. ç­›é€‰ "XHR" æˆ– "Fetch" è¯·æ±‚
4. æŸ¥çœ‹è¯·æ±‚å’Œå“åº”è¯¦æƒ…

### 3. æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—

æ‰€æœ‰ API è°ƒç”¨éƒ½ä¼šåœ¨æ§åˆ¶å°è¾“å‡ºæ—¥å¿—ï¼ˆå¦‚æœ `debug: true`ï¼‰:

```
[API] GET http://localhost:3000/sermons?page=1&limit=20
[API] Response: { success: true, data: [...], pagination: {...} }
```

### 4. ä½¿ç”¨æ–­ç‚¹è°ƒè¯•

åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„ "Sources" æ ‡ç­¾ä¸­:
1. æ‰¾åˆ°å¯¹åº”çš„ API è„šæœ¬æ–‡ä»¶
2. è®¾ç½®æ–­ç‚¹
3. é‡æ–°æ‰§è¡Œæ“ä½œ
4. é€æ­¥è°ƒè¯•ä»£ç 

---

## åç»­æ­¥éª¤

### 1. å®Œæˆ HTML é¡µé¢æ›´æ–°

ä½¿ç”¨ä»¥ä¸‹è„šæœ¬æ‰¹é‡æ·»åŠ  API è„šæœ¬å¼•ç”¨:

```bash
# åˆ›å»ºä¸€ä¸ªè„šæœ¬æ¥æ‰¹é‡æ›´æ–°HTMLæ–‡ä»¶
# update-html-files.sh
```

### 2. æµ‹è¯•æ‰€æœ‰åŠŸèƒ½

æŒ‰ç…§æµ‹è¯•æŒ‡å—é€ä¸€æµ‹è¯•æ¯ä¸ªæ¨¡å—ã€‚

### 3. éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

1. æ›´æ–° `api-config.js` ä¸­çš„ `baseURL`
2. éƒ¨ç½² Cloudflare Workers API
3. éƒ¨ç½²å‰ç«¯åˆ° Cloudflare Pages

### 4. ç›‘æ§å’Œä¼˜åŒ–

1. æ·»åŠ é”™è¯¯æ—¥å¿—æ”¶é›†
2. ç›‘æ§ API æ€§èƒ½
3. ä¼˜åŒ–åŠ è½½é€Ÿåº¦

---

## è”ç³»æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»:
- Email: livingwater.99lamb@gmail.com
- é¡¹ç›®æ–‡æ¡£: `TingDao_Project_Blueprint.md`

---

**æ–‡æ¡£ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°**: 2025å¹´11æœˆ4æ—¥

