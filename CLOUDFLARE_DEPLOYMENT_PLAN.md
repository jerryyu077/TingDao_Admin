# ğŸš€ TingDao Cloudflareå®Œæ•´éƒ¨ç½²è®¡åˆ’

## ğŸ“‹ ç›®æ ‡
å»ºç«‹Adminé¢æ¿å’ŒiOS Appä¹‹é—´çš„å®Œæ•´æ•°æ®é€šä¿¡é“¾è·¯ï¼Œå®ç°äº‘ç«¯æ•°æ®ç®¡ç†ã€‚

---

## ğŸ¯ æ•´ä½“æ¶æ„å›¾

```
iOS App (Swift)
    â†“ â†‘ (APIè¯·æ±‚/å“åº”)
Cloudflare Workers (APIåç«¯)
    â†“ â†‘ (æ•°æ®è¯»å†™)
Cloudflare D1 (SQLiteæ•°æ®åº“)
    â†‘
Admin Panel (å·²éƒ¨ç½²åœ¨Cloudflare Pages)
    â†“ (é€šè¿‡APIç®¡ç†æ•°æ®)
Cloudflare R2 (å›¾ç‰‡å’ŒéŸ³é¢‘å­˜å‚¨)
```

---

## ğŸ“Š å½“å‰çŠ¶æ€æ£€æŸ¥

### âœ… å·²å®Œæˆ
- [x] Adminé¢æ¿éƒ¨ç½²åˆ°Cloudflare Pages
- [x] Cloudflare Zero Trustä¿æŠ¤è®¾ç½®
- [x] Cloudflareè´¦å·è¿æ¥åˆ°æœ¬åœ°ç”µè„‘

### â³ å¾…å®Œæˆ
- [ ] Cloudflare Workers APIéƒ¨ç½²
- [ ] Cloudflare D1æ•°æ®åº“åˆ›å»ºå’Œæ•°æ®å¯¼å…¥
- [ ] Cloudflare R2æ–‡ä»¶å­˜å‚¨è®¾ç½®
- [ ] Adminå‰ç«¯API URLé…ç½®
- [ ] iOS App API URLåˆ‡æ¢

---

## ğŸ—‚ï¸ éƒ¨ç½²æ­¥éª¤æ€»è§ˆ

### é˜¶æ®µä¸€ï¼šæ•°æ®åº“å‡†å¤‡ï¼ˆD1ï¼‰
**ç›®æ ‡**: åˆ›å»ºäº‘ç«¯æ•°æ®åº“å¹¶å¯¼å…¥ç°æœ‰æ•°æ®  
**æ—¶é—´**: 30-60åˆ†é’Ÿ  
**éš¾åº¦**: â­â­

### é˜¶æ®µäºŒï¼šAPIåç«¯éƒ¨ç½²ï¼ˆWorkersï¼‰
**ç›®æ ‡**: éƒ¨ç½²APIæœåŠ¡ï¼Œè¿æ¥æ•°æ®åº“  
**æ—¶é—´**: 1-2å°æ—¶  
**éš¾åº¦**: â­â­â­

### é˜¶æ®µä¸‰ï¼šæ–‡ä»¶å­˜å‚¨è®¾ç½®ï¼ˆR2ï¼‰
**ç›®æ ‡**: ä¸Šä¼ å›¾ç‰‡å’ŒéŸ³é¢‘ï¼Œæ›¿æ¢base64  
**æ—¶é—´**: 2-3å°æ—¶  
**éš¾åº¦**: â­â­â­

### é˜¶æ®µå››ï¼šAdminé…ç½®æ›´æ–°
**ç›®æ ‡**: æ›´æ–°Adminçš„APIåœ°å€  
**æ—¶é—´**: 15-30åˆ†é’Ÿ  
**éš¾åº¦**: â­

### é˜¶æ®µäº”ï¼šAppé…ç½®æ›´æ–°
**ç›®æ ‡**: åˆ‡æ¢Appåˆ°äº‘ç«¯API  
**æ—¶é—´**: 15-30åˆ†é’Ÿ  
**éš¾åº¦**: â­

### é˜¶æ®µå…­ï¼šæµ‹è¯•å’ŒéªŒè¯
**ç›®æ ‡**: å…¨é¢æµ‹è¯•æ‰€æœ‰åŠŸèƒ½  
**æ—¶é—´**: 1-2å°æ—¶  
**éš¾åº¦**: â­â­

---

## ğŸ“– è¯¦ç»†æ­¥éª¤è¯´æ˜

---

## é˜¶æ®µä¸€ï¼šCloudflare D1 æ•°æ®åº“å‡†å¤‡

### ğŸ¯ ç›®æ ‡
å°†ä½ æœ¬åœ°çš„`seed.json`æ•°æ®å¯¼å…¥åˆ°Cloudflare D1æ•°æ®åº“ã€‚

### ğŸ“ æ­¥éª¤1.1ï¼šç†è§£D1æ•°æ®åº“

**D1æ˜¯ä»€ä¹ˆï¼Ÿ**
- Cloudflareçš„SQLiteæ•°æ®åº“æœåŠ¡
- ç±»ä¼¼äºä½ ç”µè„‘ä¸Šçš„SQLiteï¼Œä½†è¿è¡Œåœ¨äº‘ç«¯
- å…è´¹é¢åº¦ï¼šæ¯å¤©100,000æ¬¡è¯»å–ï¼Œ50,000æ¬¡å†™å…¥

**ä¸ºä»€ä¹ˆè¦ç”¨D1ï¼Ÿ**
- ç›®å‰ä½ çš„æ•°æ®åœ¨æœ¬åœ°`seed.json`æ–‡ä»¶ä¸­
- Appå’ŒAdminéœ€è¦ä»äº‘ç«¯è¯»å–æ•°æ®
- D1æä¾›æ ‡å‡†çš„SQLæŸ¥è¯¢ï¼Œæ€§èƒ½æ›´å¥½

### ğŸ“ æ­¥éª¤1.2ï¼šåˆ›å»ºD1æ•°æ®åº“

**åœ¨Cloudflare Dashboardä¸­æ“ä½œï¼š**

1. **ç™»å½•Dashboard**
   - è®¿é—®: https://dash.cloudflare.com/
   - é€‰æ‹©ä½ çš„è´¦å·

2. **è¿›å…¥Workers & Pages**
   - å·¦ä¾§èœå• â†’ Workers & Pages
   - ç‚¹å‡»é¡¶éƒ¨æ ‡ç­¾ â†’ D1

3. **åˆ›å»ºæ–°æ•°æ®åº“**
   - ç‚¹å‡» "Create database" æŒ‰é’®
   - æ•°æ®åº“åç§°: `tingdao-production`
   - Location: é€‰æ‹©ç¦»ä½ ç”¨æˆ·æœ€è¿‘çš„ä½ç½®ï¼ˆå»ºè®®ï¼šäºšå¤ªåœ°åŒºï¼‰
   - ç‚¹å‡» "Create"

4. **è®°å½•æ•°æ®åº“ä¿¡æ¯**
   ```
   Database name: tingdao-production
   Database ID: [ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆï¼Œå¤åˆ¶ä¿å­˜]
   ```

### ğŸ“ æ­¥éª¤1.3ï¼šè®¾è®¡æ•°æ®åº“è¡¨ç»“æ„

**å…³é”®å†³ç­–ç‚¹ï¼š** è¦ä¸è¦æŠŠJSONæ”¹æˆSQLè¡¨ï¼Ÿ

#### é€‰é¡¹Aï¼šä¿æŒJSONæ ¼å¼ï¼ˆæ¨èæ–°æ‰‹ï¼‰
**ä¼˜ç‚¹ï¼š**
- ä¸éœ€è¦æ”¹å˜æ•°æ®ç»“æ„
- å¿«é€Ÿè¿ç§»ï¼ˆ1å°æ—¶å†…å®Œæˆï¼‰
- ä»£ç æ”¹åŠ¨æœ€å°‘

**åšæ³•ï¼š**
- åœ¨D1ä¸­åˆ›å»ºä¸€ä¸ªç®€å•çš„è¡¨ï¼š`data`
- åªæœ‰ä¸¤åˆ—ï¼š`key` (text) å’Œ `value` (text)
- æŠŠæ•´ä¸ª`seed.json`çš„æ¯ä¸ªéƒ¨åˆ†ä½œä¸ºJSONå­—ç¬¦ä¸²å­˜å‚¨
- ä¾‹å¦‚ï¼š
  ```
  key = "sermons"
  value = "[{sermon1}, {sermon2}, ...]" (JSONå­—ç¬¦ä¸²)
  ```

**SQLåˆ›å»ºè¯­å¥ï¼š**
```sql
CREATE TABLE data (
    key TEXT PRIMARY KEY,
    value TEXT NOT NULL
);
```

#### é€‰é¡¹Bï¼šå®Œæ•´SQLè¡¨ç»“æ„ï¼ˆæ¨èé•¿æœŸï¼‰
**ä¼˜ç‚¹ï¼š**
- æ›´å¥½çš„æŸ¥è¯¢æ€§èƒ½
- æ”¯æŒå¤æ‚æŸ¥è¯¢ï¼ˆJOINã€WHEREç­‰ï¼‰
- æ•°æ®å®Œæ•´æ€§æ›´å¥½

**ç¼ºç‚¹ï¼š**
- éœ€è¦è®¾è®¡å¤šä¸ªè¡¨
- éœ€è¦è½¬æ¢æ•°æ®æ ¼å¼
- æ—¶é—´æ›´é•¿ï¼ˆ3-4å°æ—¶ï¼‰

**éœ€è¦åˆ›å»ºçš„è¡¨ï¼š**
```
- sermons (è®²é“è¡¨)
- speakers (è®²å‘˜è¡¨)
- users (ç”¨æˆ·è¡¨)
- topics (ä¸»é¢˜è¡¨)
- sermon_topics (è®²é“-ä¸»é¢˜å…³è”è¡¨)
- home_config (é¦–é¡µé…ç½®è¡¨)
- discover_config (å‘ç°é¡µé…ç½®è¡¨)
... ç­‰
```

**æˆ‘çš„å»ºè®®ï¼š**
- ç¬¬ä¸€æ¬¡éƒ¨ç½²ä½¿ç”¨ **é€‰é¡¹A**ï¼ˆJSONæ ¼å¼ï¼‰
- å¿«é€Ÿä¸Šçº¿ï¼ŒéªŒè¯æ•´ä½“æµç¨‹
- ä»¥åæœ‰æ—¶é—´å†è¿ç§»åˆ°é€‰é¡¹B

### ğŸ“ æ­¥éª¤1.4ï¼šå¯¼å…¥æ•°æ®åˆ°D1

**ä½¿ç”¨Wrangler CLIå·¥å…·ï¼ˆCloudflareå®˜æ–¹å·¥å…·ï¼‰**

#### 1. ç¡®è®¤Wranglerå·²å®‰è£…
```bash
# æ£€æŸ¥æ˜¯å¦å·²å®‰è£…
wrangler --version

# å¦‚æœæ²¡æœ‰ï¼Œå®‰è£…å®ƒ
npm install -g wrangler

# ç™»å½•åˆ°Cloudflareè´¦å·
wrangler login
```

#### 2. åˆ›å»ºè¡¨ç»“æ„
```bash
# ä½¿ç”¨é€‰é¡¹Aï¼ˆJSONæ ¼å¼ï¼‰çš„å»ºè¡¨è¯­å¥
wrangler d1 execute tingdao-production --command "CREATE TABLE data (key TEXT PRIMARY KEY, value TEXT NOT NULL);"
```

#### 3. å‡†å¤‡æ•°æ®å¯¼å…¥è„šæœ¬
**éœ€è¦åˆ›å»ºä¸€ä¸ªè„šæœ¬**æŠŠ`seed.json`è½¬æ¢æˆSQL INSERTè¯­å¥

**ä¾‹å¦‚ï¼ˆä¼ªä»£ç ï¼‰ï¼š**
```javascript
// è¯»å– seed.json
const seedData = require('./seed.json');

// ä¸ºæ¯ä¸ªæ•°æ®ç±»å‹ç”ŸæˆINSERTè¯­å¥
INSERT INTO data (key, value) VALUES ('sermons', '[...]');
INSERT INTO data (key, value) VALUES ('speakers', '[...]');
INSERT INTO data (key, value) VALUES ('users', '[...]');
// ... ç­‰
```

#### 4. æ‰§è¡Œå¯¼å…¥
```bash
wrangler d1 execute tingdao-production --file=import.sql
```

### ğŸ“ æ­¥éª¤1.5ï¼šéªŒè¯æ•°æ®å¯¼å…¥

```bash
# æŸ¥è¯¢æ•°æ®
wrangler d1 execute tingdao-production --command "SELECT key, length(value) as size FROM data;"

# åº”è¯¥çœ‹åˆ°ç±»ä¼¼ï¼š
# sermons | 150000
# speakers | 45000
# users | 30000
# ...
```

### âš ï¸ æ³¨æ„äº‹é¡¹
1. **JSONå¤§å°é™åˆ¶**
   - D1å•ä¸ªå­—æ®µæœ€å¤§1MB
   - å¦‚æœä½ çš„sermonsæ•°æ®è¶…è¿‡1MBï¼Œéœ€è¦åˆ†æ‰¹å­˜å‚¨
   
2. **æ•°æ®å¤‡ä»½**
   - å¯¼å…¥å‰å¤‡ä»½`seed.json`
   - å¯¼å…¥åå†æ¬¡éªŒè¯æ•°æ®å®Œæ•´æ€§

3. **å­—ç¬¦ç¼–ç **
   - ç¡®ä¿ä¸­æ–‡å­—ç¬¦æ­£ç¡®ç¼–ç ï¼ˆUTF-8ï¼‰

### â“ è®¨è®ºç‚¹1
1. **ä½ æƒ³ç”¨é€‰é¡¹Aï¼ˆJSONï¼‰è¿˜æ˜¯é€‰é¡¹Bï¼ˆSQLè¡¨ï¼‰ï¼Ÿ**
2. **ä½ çš„seed.jsonå¤§æ¦‚å¤šå¤§ï¼Ÿ** (å¯ä»¥ç”¨ `ls -lh seed.json` æŸ¥çœ‹)
3. **ä½ æ˜¯å¦å·²ç»å®‰è£…äº†Node.jså’Œnpmï¼Ÿ** (Wrangleréœ€è¦)

---

## é˜¶æ®µäºŒï¼šCloudflare Workers APIéƒ¨ç½²

### ğŸ¯ ç›®æ ‡
éƒ¨ç½²APIæœåŠ¡ï¼Œè®©Adminå’ŒAppå¯ä»¥é€šè¿‡HTTPè¯·æ±‚è¯»å†™æ•°æ®ã€‚

### ğŸ“ æ­¥éª¤2.1ï¼šç†è§£Workers

**Workersæ˜¯ä»€ä¹ˆï¼Ÿ**
- ç±»ä¼¼äºä½ æœ¬åœ°çš„`backend/server.js`
- ä½†è¿è¡Œåœ¨Cloudflareçš„è¾¹ç¼˜ç½‘ç»œä¸Š
- å…¨çƒåˆ†å¸ƒï¼Œé€Ÿåº¦æ›´å¿«

**ç°æœ‰ä»£ç ï¼š**
- ä½ æœ‰ `backend/server.js` (Node.js + json-server)
- éœ€è¦æ”¹é€ æˆWorkersæ ¼å¼ï¼ˆç±»ä¼¼ï¼Œä½†æœ‰åŒºåˆ«ï¼‰

### ğŸ“ æ­¥éª¤2.2ï¼šåˆ›å»ºWorkersé¡¹ç›®

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨Wrangleråˆ›å»ºæ–°é¡¹ç›®
```bash
# åœ¨æœ¬åœ°åˆ›å»ºæ–°é¡¹ç›®
cd /Users/jy/Desktop/TingDao
wrangler init tingdao-api

# é€‰æ‹©ï¼š
# - Template: "Fetch handler"
# - TypeScript: No (æˆ–Yesï¼Œçœ‹ä½ å–œå¥½)
# - Git: Yes
```

#### æ–¹å¼äºŒï¼šæ‰‹åŠ¨åˆ›å»ºï¼ˆæ›´çµæ´»ï¼‰
åˆ›å»ºä»¥ä¸‹æ–‡ä»¶ç»“æ„ï¼š
```
tingdao-api/
â”œâ”€â”€ wrangler.toml       # Workersé…ç½®æ–‡ä»¶
â”œâ”€â”€ src/
â”‚   â””â”€â”€ index.js        # ä¸»è¦APIä»£ç 
â””â”€â”€ package.json        # ä¾èµ–ç®¡ç†
```

### ğŸ“ æ­¥éª¤2.3ï¼šè¿ç§»ç°æœ‰APIä»£ç 

**æ ¸å¿ƒå†³ç­–ï¼šé‡å†™ vs æ”¹é€ **

#### é€‰é¡¹Aï¼šå®Œå…¨é‡å†™ï¼ˆæ¨èï¼‰
**åŸå› ï¼š**
- `json-server`æ— æ³•åœ¨Workersä¸­è¿è¡Œ
- Workersç¯å¢ƒå’ŒNode.jsä¸åŒ
- éœ€è¦é€‚é…Workers API

**éœ€è¦å®ç°çš„APIç«¯ç‚¹ï¼š**
```
GET  /v1/sermons              - è·å–è®²é“åˆ—è¡¨
GET  /v1/sermons/:id          - è·å–è®²é“è¯¦æƒ…
POST /v1/sermons              - åˆ›å»ºè®²é“
PUT  /v1/sermons/:id          - æ›´æ–°è®²é“
PATCH /v1/sermons/:id/status  - æ›´æ–°çŠ¶æ€

GET  /v1/speakers             - è·å–è®²å‘˜åˆ—è¡¨
GET  /v1/speakers/:id         - è·å–è®²å‘˜è¯¦æƒ…
POST /v1/speakers             - åˆ›å»ºè®²å‘˜
PUT  /v1/speakers/:id         - æ›´æ–°è®²å‘˜
PATCH /v1/speakers/:id        - æ›´æ–°çŠ¶æ€

GET  /v1/users                - è·å–ç”¨æˆ·åˆ—è¡¨
GET  /v1/users/:id            - è·å–ç”¨æˆ·è¯¦æƒ…
PUT  /v1/users/:id            - æ›´æ–°ç”¨æˆ·
PATCH /v1/users/:id           - æ›´æ–°çŠ¶æ€

GET  /v1/topics               - è·å–ä¸»é¢˜åˆ—è¡¨
POST /v1/topics               - åˆ›å»ºä¸»é¢˜
PUT  /v1/topics/:id           - æ›´æ–°ä¸»é¢˜
DELETE /v1/topics/:id         - åˆ é™¤ä¸»é¢˜
PUT  /v1/topics/:id/sermons   - æ›´æ–°ä¸»é¢˜è®²é“åˆ—è¡¨

GET  /v1/home/config          - è·å–é¦–é¡µé…ç½®
PUT  /v1/home/config          - æ›´æ–°é¦–é¡µé…ç½®

GET  /v1/discover/config      - è·å–å‘ç°é¡µé…ç½®
PUT  /v1/discover/config      - æ›´æ–°å‘ç°é¡µé…ç½®

GET  /v1/launch-screen        - è·å–å¼€å±é¡µé…ç½®
PUT  /v1/launch-screen        - æ›´æ–°å¼€å±é¡µé…ç½®
```

**åŸºæœ¬ç»“æ„ï¼ˆä¼ªä»£ç ï¼‰ï¼š**
```javascript
export default {
  async fetch(request, env, ctx) {
    const url = new URL(request.url);
    const path = url.pathname;
    
    // è·¯ç”±åˆ†å‘
    if (path.startsWith('/v1/sermons')) {
      return handleSermons(request, env);
    } else if (path.startsWith('/v1/speakers')) {
      return handleSpeakers(request, env);
    }
    // ... å…¶ä»–è·¯ç”±
    
    return new Response('Not Found', { status: 404 });
  }
};

async function handleSermons(request, env) {
  const method = request.method;
  
  if (method === 'GET') {
    // ä»D1è¯»å–æ•°æ®
    const result = await env.DB.prepare(
      "SELECT value FROM data WHERE key = ?"
    ).bind('sermons').first();
    
    const sermons = JSON.parse(result.value);
    return Response.json(sermons);
  }
  // ... å…¶ä»–æ–¹æ³•
}
```

### ğŸ“ æ­¥éª¤2.4ï¼šè¿æ¥D1æ•°æ®åº“

**åœ¨wrangler.tomlä¸­é…ç½®ï¼š**
```toml
name = "tingdao-api"
main = "src/index.js"
compatibility_date = "2024-01-01"

[[d1_databases]]
binding = "DB"
database_name = "tingdao-production"
database_id = "[ä½ çš„æ•°æ®åº“ID]"
```

### ğŸ“ æ­¥éª¤2.5ï¼šæœ¬åœ°æµ‹è¯•Workers

```bash
# å¯åŠ¨æœ¬åœ°å¼€å‘æœåŠ¡å™¨
wrangler dev

# æµ‹è¯•API
curl http://localhost:8787/v1/sermons
```

### ğŸ“ æ­¥éª¤2.6ï¼šéƒ¨ç½²åˆ°Cloudflare

```bash
# éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
wrangler deploy

# ä¼šå¾—åˆ°ä¸€ä¸ªURLï¼Œä¾‹å¦‚ï¼š
# https://tingdao-api.your-subdomain.workers.dev
```

### ğŸ“ æ­¥éª¤2.7ï¼šè®¾ç½®è‡ªå®šä¹‰åŸŸåï¼ˆå¯é€‰ä½†æ¨èï¼‰

**ä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ**
- `*.workers.dev` åŸŸååœ¨æŸäº›åœ°åŒºå¯èƒ½è¢«é™åˆ¶
- è‡ªå®šä¹‰åŸŸåæ›´ä¸“ä¸š

**æ­¥éª¤ï¼š**
1. åœ¨Cloudflareä¸­æ·»åŠ /æ‰˜ç®¡ä½ çš„åŸŸå
2. Workers & Pages â†’ tingdao-api â†’ Settings â†’ Domains & Routes
3. æ·»åŠ è‡ªå®šä¹‰åŸŸåï¼Œå¦‚ï¼š`api.tingdao.com`
4. Cloudflareè‡ªåŠ¨é…ç½®DNSå’ŒSSL

### âš ï¸ æ³¨æ„äº‹é¡¹
1. **Workerså…è´¹é™é¢**
   - æ¯å¤©100,000æ¬¡è¯·æ±‚ï¼ˆå…è´¹ï¼‰
   - è¶…è¿‡éœ€è¦å‡çº§åˆ°ä»˜è´¹è®¡åˆ’ï¼ˆ$5/æœˆï¼‰

2. **CPUæ—¶é—´é™åˆ¶**
   - å…è´¹ï¼š10ms
   - ä»˜è´¹ï¼š50ms
   - å¤æ‚æŸ¥è¯¢å¯èƒ½è¶…æ—¶ï¼Œéœ€è¦ä¼˜åŒ–

3. **CORSé…ç½®**
   - Adminå’ŒAppè·¨åŸŸè¯·æ±‚éœ€è¦è®¾ç½®CORSå¤´

### â“ è®¨è®ºç‚¹2
1. **ä½ æƒ³è‡ªå·±å†™Workersä»£ç ï¼Œè¿˜æ˜¯æˆ‘å¸®ä½ ç”Ÿæˆï¼Ÿ**
2. **ä½ æœ‰è‡ªå·±çš„åŸŸåå—ï¼Ÿ**ï¼ˆå¦‚tingdao.comï¼‰
3. **ä½ é¢„è®¡æ¯å¤©æœ‰å¤šå°‘APIè¯·æ±‚ï¼Ÿ**ï¼ˆè¯„ä¼°æ˜¯å¦éœ€è¦ä»˜è´¹ï¼‰

---

## é˜¶æ®µä¸‰ï¼šCloudflare R2 æ–‡ä»¶å­˜å‚¨

### ğŸ¯ ç›®æ ‡
ä¸Šä¼ å›¾ç‰‡å’ŒéŸ³é¢‘æ–‡ä»¶åˆ°R2ï¼Œæ›¿æ¢base64ç¼–ç å’ŒURLå ä½ç¬¦ã€‚

### ğŸ“ æ­¥éª¤3.1ï¼šç†è§£R2

**R2æ˜¯ä»€ä¹ˆï¼Ÿ**
- ç±»ä¼¼äºAWS S3çš„å¯¹è±¡å­˜å‚¨
- ç”¨äºå­˜å‚¨å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰å¤§æ–‡ä»¶
- å…è´¹é¢åº¦ï¼šæ¯æœˆ10GBå­˜å‚¨ï¼Œæ¯æœˆ100ä¸‡æ¬¡è¯»å–

**å½“å‰é—®é¢˜ï¼š**
- å›¾ç‰‡ï¼šä½¿ç”¨base64ç¼–ç åœ¨JSONä¸­ï¼ˆå¤ªå¤§ï¼Œå½±å“æ€§èƒ½ï¼‰
- éŸ³é¢‘ï¼šä½¿ç”¨URLå ä½ç¬¦ï¼ˆ`https://cdn.tingdao.com/audio/...`ï¼‰

### ğŸ“ æ­¥éª¤3.2ï¼šåˆ›å»ºR2 Bucket

1. **Dashboard â†’ R2**
   - ç‚¹å‡» "Create bucket"
   - Bucketåç§°: `tingdao-media`
   - Location: è‡ªåŠ¨ï¼ˆCloudflareä¼˜åŒ–ï¼‰
   - ç‚¹å‡» "Create bucket"

2. **é…ç½®å…¬å¼€è®¿é—®**
   - Settings â†’ Public access â†’ Enable
   - æˆ–è€…ä½¿ç”¨Custom domainç»‘å®šåŸŸå

### ğŸ“ æ­¥éª¤3.3ï¼šä¸Šä¼ ç°æœ‰æ–‡ä»¶

**æ–¹æ³•ä¸€ï¼šä½¿ç”¨Dashboardæ‰‹åŠ¨ä¸Šä¼ **
- é€‚åˆæµ‹è¯•ï¼Œå°é‡æ–‡ä»¶
- R2 â†’ tingdao-media â†’ Upload

**æ–¹æ³•äºŒï¼šä½¿ç”¨Wrangleræ‰¹é‡ä¸Šä¼ **
```bash
# ä¸Šä¼ æ•´ä¸ªç›®å½•
wrangler r2 object put tingdao-media/audio/sermon-001.mp3 --file=/path/to/audio.mp3
```

**æ–¹æ³•ä¸‰ï¼šç¼–å†™è„šæœ¬æ‰¹é‡ä¸Šä¼ **
- éå†æ‰€æœ‰éœ€è¦ä¸Šä¼ çš„æ–‡ä»¶
- è‡ªåŠ¨ä¸Šä¼ å¹¶è®°å½•URL

### ğŸ“ æ­¥éª¤3.4ï¼šå¤„ç†base64å›¾ç‰‡

**ä»»åŠ¡ï¼šæ‰¾å‡ºæ‰€æœ‰base64å›¾ç‰‡å¹¶è½¬æ¢**

1. **è¯†åˆ«base64å›¾ç‰‡**
   ```javascript
   // åœ¨seed.jsonä¸­æœç´¢
   "cover_image_url": "data:image/jpeg;base64,/9j/4AAQ..."
   "avatar_url": "data:image/png;base64,iVBORw0KG..."
   ```

2. **è½¬æ¢æ­¥éª¤**
   - è§£ç base64ä¸ºäºŒè¿›åˆ¶æ–‡ä»¶
   - ä¸Šä¼ åˆ°R2
   - è·å¾—URLï¼š`https://media.tingdao.com/covers/sermon-001.jpg`
   - æ›´æ–°æ•°æ®åº“ä¸­çš„URL

3. **æ‰¹é‡å¤„ç†è„šæœ¬ï¼ˆä¼ªä»£ç ï¼‰**
   ```javascript
   // éå†æ‰€æœ‰sermon
   for (const sermon of sermons) {
     if (sermon.cover_image_url.startsWith('data:')) {
       // 1. è§£ç base64
       const imageBuffer = base64Decode(sermon.cover_image_url);
       
       // 2. ä¸Šä¼ åˆ°R2
       const filename = `covers/${sermon.id}.jpg`;
       await uploadToR2(filename, imageBuffer);
       
       // 3. æ›´æ–°URL
       sermon.cover_image_url = `https://media.tingdao.com/${filename}`;
     }
   }
   ```

### ğŸ“ æ­¥éª¤3.5ï¼šéŸ³é¢‘æ–‡ä»¶å¤„ç†

**å½“å‰çŠ¶æ€ï¼š**
```javascript
"audio_url": "https://cdn.tingdao.com/audio/sermon-001.mp3"
```

**é—®é¢˜ï¼šè¿™äº›æ–‡ä»¶ä¸å­˜åœ¨ï¼**

**è§£å†³æ–¹æ¡ˆï¼š**
1. **ä¸´æ—¶æ–¹æ¡ˆ**ï¼šä¿æŒå ä½ç¬¦ï¼Œå…ˆæµ‹è¯•å…¶ä»–åŠŸèƒ½
2. **é•¿æœŸæ–¹æ¡ˆ**ï¼š
   - å‡†å¤‡çœŸå®éŸ³é¢‘æ–‡ä»¶
   - ä¸Šä¼ åˆ°R2
   - æ›´æ–°URL

### ğŸ“ æ­¥éª¤3.6ï¼šR2ä¸Workersé›†æˆ

**åœ¨Workersä¸­è®¿é—®R2ï¼š**

```javascript
// wrangler.tomlé…ç½®
[[r2_buckets]]
binding = "MEDIA"
bucket_name = "tingdao-media"

// Workersä»£ç 
export default {
  async fetch(request, env) {
    // è¯»å–æ–‡ä»¶
    const object = await env.MEDIA.get('covers/sermon-001.jpg');
    
    // è¿”å›æ–‡ä»¶
    return new Response(object.body, {
      headers: {
        'Content-Type': 'image/jpeg'
      }
    });
  }
}
```

### ğŸ“ æ­¥éª¤3.7ï¼šè®¾ç½®CDNåŸŸå

**ä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ**
- `*.r2.dev`åŸŸååœ¨ä¸­å›½å¯èƒ½è¾ƒæ…¢
- è‡ªå®šä¹‰åŸŸåå¯ä»¥ä½¿ç”¨Cloudflare CDNåŠ é€Ÿ

**è®¾ç½®ï¼š**
1. R2 â†’ tingdao-media â†’ Settings â†’ Custom domains
2. æ·»åŠ åŸŸåï¼š`media.tingdao.com`
3. Cloudflareè‡ªåŠ¨é…ç½®

### âš ï¸ æ³¨æ„äº‹é¡¹
1. **æ–‡ä»¶å‘½åè§„èŒƒ**
   ```
   covers/sermon-{id}.jpg
   audio/sermon-{id}.mp3
   avatars/speaker-{id}.jpg
   ```

2. **å›¾ç‰‡ä¼˜åŒ–**
   - å‹ç¼©å›¾ç‰‡ï¼ˆå»ºè®®<200KBï¼‰
   - ä½¿ç”¨WebPæ ¼å¼ï¼ˆæ›´å°ï¼‰

3. **éŸ³é¢‘æ ¼å¼**
   - å»ºè®®ä½¿ç”¨MP3ï¼ˆå…¼å®¹æ€§å¥½ï¼‰
   - æ¯”ç‰¹ç‡ï¼š64-128kbpsï¼ˆæ–‡ä»¶æ›´å°ï¼‰

### â“ è®¨è®ºç‚¹3
1. **ä½ æœ‰çœŸå®çš„éŸ³é¢‘æ–‡ä»¶å—ï¼Ÿè¿˜æ˜¯éœ€è¦å…ˆç”¨å ä½ç¬¦ï¼Ÿ**
2. **ä½ çš„base64å›¾ç‰‡å¤§æ¦‚æœ‰å¤šå°‘ä¸ªï¼Ÿ**
3. **ä½ å¸Œæœ›æ‰‹åŠ¨ä¸Šä¼ è¿˜æ˜¯æˆ‘å†™è„šæœ¬æ‰¹é‡å¤„ç†ï¼Ÿ**

---

## é˜¶æ®µå››ï¼šAdminé…ç½®æ›´æ–°

### ğŸ¯ ç›®æ ‡
æ›´æ–°Adminå‰ç«¯çš„APIåœ°å€ï¼Œä»`localhost:3000`æ”¹ä¸ºWorkers URLã€‚

### ğŸ“ æ­¥éª¤4.1ï¼šæ‰¾åˆ°éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶

**ä¸»è¦æ–‡ä»¶ï¼š**
```
admin/js/api-config.js  - APIåŸºç¡€é…ç½®
```

**å…¶ä»–å¯èƒ½éœ€è¦ä¿®æ”¹çš„ï¼š**
```
admin/js/api-client.js
admin/js/api-services.js
admin/home-editor.html
admin/discover-editor.html
... (æ‰€æœ‰è°ƒç”¨APIçš„é¡µé¢)
```

### ğŸ“ æ­¥éª¤4.2ï¼šæ›´æ–°APIé…ç½®

**ä¿®æ”¹api-config.jsï¼š**
```javascript
// æ—§é…ç½®
const API_BASE_URL = 'http://localhost:3000';

// æ–°é…ç½®
const API_BASE_URL = 'https://tingdao-api.your-subdomain.workers.dev';
// æˆ–ä½¿ç”¨è‡ªå®šä¹‰åŸŸå
const API_BASE_URL = 'https://api.tingdao.com';
```

### ğŸ“ æ­¥éª¤4.3ï¼šæ¨é€æ›´æ–°

```bash
cd /Users/jy/Desktop/TingDao/Tingdao1020/Tingdao1020/admin
git add .
git commit -m "Update API URL to Cloudflare Workers"
git push origin main
```

**Cloudflare Pagesè‡ªåŠ¨éƒ¨ç½²**ï¼ˆ1-2åˆ†é’Ÿï¼‰

### ğŸ“ æ­¥éª¤4.4ï¼šéªŒè¯AdminåŠŸèƒ½

æµ‹è¯•æ‰€æœ‰é¡µé¢ï¼š
- [ ] é¦–é¡µé…ç½®ï¼šåŠ è½½å’Œä¿å­˜
- [ ] å‘ç°é¡µé…ç½®ï¼šåŠ è½½å’Œä¿å­˜
- [ ] è®²é“åˆ—è¡¨ï¼šæœç´¢ã€ç­›é€‰ã€åˆ†é¡µ
- [ ] è®²é“è¯¦æƒ…ï¼šç¼–è¾‘ã€ä¿å­˜
- [ ] è®²å‘˜ç®¡ç†ï¼šåˆ—è¡¨ã€ç¼–è¾‘ã€æ·»åŠ 
- [ ] ç”¨æˆ·ç®¡ç†ï¼šåˆ—è¡¨ã€ç¼–è¾‘ã€æ‰¹é‡æ“ä½œ
- [ ] ä¸»é¢˜ç®¡ç†ï¼šCRUDæ“ä½œ

### âš ï¸ æ³¨æ„äº‹é¡¹
1. **CORSé—®é¢˜**
   - AdminåŸŸåï¼š`*.pages.dev`
   - APIåŸŸåï¼š`*.workers.dev`
   - éœ€è¦åœ¨Workersä¸­è®¾ç½®CORSå¤´

2. **ç¼“å­˜æ¸…é™¤**
   - æµè§ˆå™¨å¯èƒ½ç¼“å­˜æ—§çš„JSæ–‡ä»¶
   - ä½¿ç”¨æ— ç—•æ¨¡å¼æˆ–å¼ºåˆ¶åˆ·æ–°æµ‹è¯•

---

## é˜¶æ®µäº”ï¼šiOS Appé…ç½®æ›´æ–°

### ğŸ¯ ç›®æ ‡
åˆ‡æ¢Appçš„APIåœ°å€åˆ°ç”Ÿäº§ç¯å¢ƒã€‚

### ğŸ“ æ­¥éª¤5.1ï¼šä¿®æ”¹APIEndpoints.swift

**æ–‡ä»¶ä½ç½®ï¼š**
```
Tingdao1020/Services/Network/APIEndpoints.swift
```

**ä¿®æ”¹é…ç½®ï¼š**
```swift
struct APIConfig {
    #if DEBUG
    // å¼€å‘ç¯å¢ƒï¼šå¯ä»¥ä¿æŒæœ¬åœ°æµ‹è¯•
    static let baseURL = "http://127.0.0.1:3000"
    #else
    // ç”Ÿäº§ç¯å¢ƒï¼šä½¿ç”¨Cloudflare Workers
    static let baseURL = "https://api.tingdao.com"
    #endif
}
```

### ğŸ“ æ­¥éª¤5.2ï¼šæ›´æ–°App Transport Security

**ä¿®æ”¹Info.plistï¼ˆå¦‚æœä½¿ç”¨HTTPï¼‰ï¼š**
```xml
<!-- å¦‚æœè¿˜ç”¨.workers.devåŸŸåï¼Œç¡®ä¿æ˜¯HTTPS -->
<!-- Cloudflareè‡ªåŠ¨æä¾›HTTPSï¼Œé€šå¸¸ä¸éœ€è¦ç‰¹æ®Šé…ç½® -->
```

### ğŸ“ æ­¥éª¤5.3ï¼šæµ‹è¯•Appæ‰€æœ‰é¡µé¢

- [ ] å¯åŠ¨é¡µï¼šå›¾ç‰‡å’Œç»æ–‡åŠ è½½
- [ ] é¦–é¡µï¼šæ¯æ—¥ç»æ–‡ã€æ¨èè®²é“ã€ä¸»é¢˜
- [ ] å‘ç°é¡µï¼šæ‰€æœ‰æ ‡ç­¾å’Œå†…å®¹
- [ ] æœç´¢ï¼šè®²é“æœç´¢åŠŸèƒ½
- [ ] æ’­æ”¾å™¨ï¼šéŸ³é¢‘æ’­æ”¾ï¼ˆå¦‚æœæœ‰çœŸå®æ–‡ä»¶ï¼‰
- [ ] è®²å‘˜é¡µï¼šè®²å‘˜åˆ—è¡¨å’Œè¯¦æƒ…

### ğŸ“ æ­¥éª¤5.4ï¼šæ„å»ºå’Œæµ‹è¯•

```bash
# åœ¨Xcodeä¸­
1. Clean Build Folder (Cmd+Shift+K)
2. Build (Cmd+B)
3. Run (Cmd+R)
```

### âš ï¸ æ³¨æ„äº‹é¡¹
1. **ç½‘ç»œæƒé™**
   - iOSéœ€è¦ç½‘ç»œæƒé™
   - é€šå¸¸è‡ªåŠ¨å¤„ç†

2. **HTTPSè¦æ±‚**
   - iOSé»˜è®¤åªå…è®¸HTTPS
   - Cloudflareè‡ªåŠ¨æä¾›

3. **é”™è¯¯å¤„ç†**
   - ç½‘ç»œå¤±è´¥æ—¶æ˜¾ç¤ºå‹å¥½æç¤º
   - é‡è¯•æœºåˆ¶

---

## é˜¶æ®µå…­ï¼šæµ‹è¯•å’ŒéªŒè¯

### ğŸ¯ ç›®æ ‡
å…¨é¢æµ‹è¯•æ•´ä¸ªç³»ç»Ÿï¼Œç¡®ä¿æ‰€æœ‰åŠŸèƒ½æ­£å¸¸ã€‚

### ğŸ“ æ­¥éª¤6.1ï¼šåŠŸèƒ½æµ‹è¯•æ¸…å•

#### Adminç«¯æµ‹è¯•
- [ ] ç™»å½•å’ŒZero TrustéªŒè¯
- [ ] é¦–é¡µé…ç½®ï¼šä¿®æ”¹å¹¶ä¿å­˜
- [ ] å‘ç°é¡µé…ç½®ï¼šä¿®æ”¹å¹¶ä¿å­˜
- [ ] è®²é“ç®¡ç†ï¼šCRUDæ“ä½œ
- [ ] è®²å‘˜ç®¡ç†ï¼šCRUDæ“ä½œ
- [ ] ç”¨æˆ·ç®¡ç†ï¼šCRUDæ“ä½œ
- [ ] ä¸»é¢˜ç®¡ç†ï¼šCRUDæ“ä½œ
- [ ] å›¾ç‰‡ä¸Šä¼ ï¼šæ˜¾ç¤ºæ­£ç¡®
- [ ] æ•°æ®æŒä¹…åŒ–ï¼šåˆ·æ–°åä¿æŒ

#### Appç«¯æµ‹è¯•
- [ ] å¯åŠ¨é¡µï¼šæ­£ç¡®æ˜¾ç¤º
- [ ] é¦–é¡µï¼šæ‰€æœ‰å†…å®¹åŠ è½½
- [ ] å‘ç°é¡µï¼šæ‰€æœ‰æ ‡ç­¾å·¥ä½œ
- [ ] æœç´¢ï¼šè¿”å›æ­£ç¡®ç»“æœ
- [ ] è®²é“è¯¦æƒ…ï¼šä¿¡æ¯å®Œæ•´
- [ ] è®²å‘˜è¯¦æƒ…ï¼šä¿¡æ¯å®Œæ•´
- [ ] å›¾ç‰‡æ˜¾ç¤ºï¼šåŠ è½½é€Ÿåº¦å¿«
- [ ] éŸ³é¢‘æ’­æ”¾ï¼šæµç•…ï¼ˆå¦‚æœ‰ï¼‰

#### æ€§èƒ½æµ‹è¯•
- [ ] é¡µé¢åŠ è½½é€Ÿåº¦ï¼š<2ç§’
- [ ] APIå“åº”æ—¶é—´ï¼š<500ms
- [ ] å›¾ç‰‡åŠ è½½ï¼š<1ç§’
- [ ] æ— æ˜æ˜¾å¡é¡¿

### ğŸ“ æ­¥éª¤6.2ï¼šå¸¸è§é—®é¢˜æ’æŸ¥

#### é—®é¢˜1ï¼š404 Not Found
**åŸå› ï¼š** APIè·¯ç”±ä¸åŒ¹é…  
**è§£å†³ï¼š** æ£€æŸ¥Workersè·¯ç”±å’Œè¯·æ±‚URL

#### é—®é¢˜2ï¼šCORSé”™è¯¯
**åŸå› ï¼š** è·¨åŸŸè¯·æ±‚è¢«é˜»æ­¢  
**è§£å†³ï¼š** åœ¨Workersä¸­æ·»åŠ CORSå¤´

#### é—®é¢˜3ï¼šæ•°æ®ä¸ºç©º
**åŸå› ï¼š** D1æŸ¥è¯¢å¤±è´¥  
**è§£å†³ï¼š** æ£€æŸ¥æ•°æ®åº“è¿æ¥å’ŒSQLè¯­å¥

#### é—®é¢˜4ï¼šå›¾ç‰‡æ— æ³•åŠ è½½
**åŸå› ï¼š** R2 URLé”™è¯¯  
**è§£å†³ï¼š** æ£€æŸ¥R2é…ç½®å’Œæ–‡ä»¶è·¯å¾„

### ğŸ“ æ­¥éª¤6.3ï¼šç›‘æ§å’Œæ—¥å¿—

**Cloudflare Dashboard:**
- Workers & Pages â†’ tingdao-api â†’ Logs
- æŸ¥çœ‹å®æ—¶è¯·æ±‚æ—¥å¿—
- ç›‘æ§é”™è¯¯å’Œå¼‚å¸¸

**è®¾ç½®å‘Šè­¦ï¼š**
- é”™è¯¯ç‡è¶…è¿‡5%
- å“åº”æ—¶é—´è¶…è¿‡1ç§’
- è¯·æ±‚æ•°å¼‚å¸¸å¢é•¿

---

## ğŸ’° è´¹ç”¨é¢„ä¼°

### CloudflareæœåŠ¡è´¹ç”¨

#### å…è´¹é¢åº¦ï¼ˆä½ ç›®å‰çš„è§„æ¨¡å®Œå…¨å¤Ÿç”¨ï¼‰
- **Pages**: å…è´¹ï¼ˆ500æ¬¡æ„å»º/æœˆï¼‰
- **Workers**: å…è´¹ï¼ˆ100,000æ¬¡è¯·æ±‚/å¤©ï¼‰
- **D1**: å…è´¹ï¼ˆ500MBå­˜å‚¨ï¼Œæ¯å¤©100,000æ¬¡è¯»å–ï¼‰
- **R2**: å…è´¹ï¼ˆ10GBå­˜å‚¨ï¼Œæ¯æœˆ100ä¸‡æ¬¡è¯»å–ï¼‰
- **Zero Trust**: å…è´¹ï¼ˆ50ç”¨æˆ·ï¼‰

#### ä»˜è´¹è®¡åˆ’ï¼ˆå¦‚æœè¶…å‡ºå…è´¹é¢åº¦ï¼‰
- **Workers Paid**: $5/æœˆï¼ˆ1000ä¸‡æ¬¡è¯·æ±‚ï¼‰
- **D1 Paid**: $5/æœˆèµ·ï¼ˆæ›´å¤šå­˜å‚¨å’Œè¯·æ±‚ï¼‰
- **R2**: $0.015/GB/æœˆï¼ˆå­˜å‚¨è´¹ç”¨ï¼‰

**é¢„è®¡æœˆè´¹ç”¨ï¼š** $0-10ï¼ˆåˆæœŸå®Œå…¨å…è´¹ï¼‰

---

## ğŸ“… æ—¶é—´å®‰æ’å»ºè®®

### æ–¹æ¡ˆä¸€ï¼šå¿«é€Ÿéƒ¨ç½²ï¼ˆæ¨èï¼‰
**ç›®æ ‡ï¼š**2-3å¤©å†…å®ŒæˆåŸºæœ¬åŠŸèƒ½

- **ç¬¬1å¤©**ï¼šD1æ•°æ®åº“ + Workers APIï¼ˆé€‰é¡¹Aï¼šJSONæ ¼å¼ï¼‰
- **ç¬¬2å¤©**ï¼šR2åŸºç¡€è®¾ç½® + Adminé…ç½®
- **ç¬¬3å¤©**ï¼šAppé…ç½® + æµ‹è¯•

### æ–¹æ¡ˆäºŒï¼šå®Œæ•´éƒ¨ç½²
**ç›®æ ‡ï¼š**1å‘¨å†…å®Œæˆæ‰€æœ‰ä¼˜åŒ–

- **ç¬¬1-2å¤©**ï¼šD1æ•°æ®åº“ï¼ˆé€‰é¡¹Bï¼šSQLè¡¨ï¼‰
- **ç¬¬3-4å¤©**ï¼šWorkers APIå®Œæ•´åŠŸèƒ½
- **ç¬¬5å¤©**ï¼šR2æ–‡ä»¶è¿ç§»ï¼ˆå›¾ç‰‡+éŸ³é¢‘ï¼‰
- **ç¬¬6å¤©**ï¼šAdmin + Appé…ç½®
- **ç¬¬7å¤©**ï¼šå…¨é¢æµ‹è¯•å’Œä¼˜åŒ–

---

## ğŸ¤” éœ€è¦è®¨è®ºçš„å…³é”®å†³ç­–

### å†³ç­–1ï¼šæ•°æ®åº“æ ¼å¼
- [ ] **é€‰é¡¹Aï¼šJSONæ ¼å¼**ï¼ˆå¿«é€Ÿï¼Œç®€å•ï¼‰
- [ ] **é€‰é¡¹Bï¼šSQLè¡¨**ï¼ˆé•¿æœŸï¼Œæ€§èƒ½å¥½ï¼‰

**æˆ‘çš„å»ºè®®ï¼š** å…ˆç”¨Aï¼Œä»¥åå†è¿ç§»åˆ°B

### å†³ç­–2ï¼šWorkersä»£ç 
- [ ] **è‡ªå·±å†™**ï¼ˆå­¦ä¹ Cloudflare Workersï¼‰
- [ ] **æˆ‘å¸®ä½ å†™**ï¼ˆå¿«é€Ÿå®Œæˆï¼‰
- [ ] **ä½¿ç”¨æ¨¡æ¿**ï¼ˆæŠ˜ä¸­æ–¹æ¡ˆï¼‰

**æˆ‘çš„å»ºè®®ï¼š** æˆ‘å…ˆå†™ä¸€ä¸ªåŸºç¡€ç‰ˆæœ¬ï¼Œä½ å†æ ¹æ®éœ€æ±‚è°ƒæ•´

### å†³ç­–3ï¼šæ–‡ä»¶ä¸Šä¼ 
- [ ] **æ‰‹åŠ¨ä¸Šä¼ **ï¼ˆé€‚åˆå°‘é‡æ–‡ä»¶ï¼‰
- [ ] **è„šæœ¬æ‰¹é‡**ï¼ˆé€‚åˆå¤§é‡æ–‡ä»¶ï¼‰
- [ ] **å…ˆå ä½ç¬¦**ï¼ˆéŸ³é¢‘æš‚æ—¶ä¸ä¼ ï¼‰

**æˆ‘çš„å»ºè®®ï¼š** å›¾ç‰‡ç”¨è„šæœ¬æ‰¹é‡ï¼ŒéŸ³é¢‘å…ˆå ä½ç¬¦

### å†³ç­–4ï¼šåŸŸåè®¾ç½®
- [ ] **ä½¿ç”¨å…è´¹åŸŸå**ï¼ˆ`*.workers.dev`ï¼Œ`*.pages.dev`ï¼‰
- [ ] **è´­ä¹°è‡ªå®šä¹‰åŸŸå**ï¼ˆå¦‚`tingdao.com`ï¼‰

**æˆ‘çš„å»ºè®®ï¼š** å…ˆç”¨å…è´¹åŸŸåæµ‹è¯•ï¼Œç¡®è®¤æ²¡é—®é¢˜åå†ä¹°åŸŸå

---

## ğŸ“ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³è®¨è®º
1. **ä½ å€¾å‘äºå¿«é€Ÿéƒ¨ç½²è¿˜æ˜¯å®Œæ•´éƒ¨ç½²ï¼Ÿ**
2. **ä½ å¯¹å“ªä¸ªé˜¶æ®µæœ€ä¸ç¡®å®šï¼Ÿ** æˆ‘å¯ä»¥è¯¦ç»†è§£é‡Š
3. **ä½ å¸Œæœ›æˆ‘å…ˆå¸®ä½ åšå“ªä¸€æ­¥ï¼Ÿ** æ¯”å¦‚å†™Workersä»£ç 

### å‡†å¤‡å·¥ä½œ
1. **ç¡®è®¤Node.jså·²å®‰è£…**
   ```bash
   node --version  # åº”è¯¥æ˜¾ç¤ºç‰ˆæœ¬å·
   npm --version
   ```

2. **å®‰è£…Wrangler**
   ```bash
   npm install -g wrangler
   wrangler login  # ç™»å½•Cloudflare
   ```

3. **å¤‡ä»½ç°æœ‰æ•°æ®**
   ```bash
   cp seed.json seed.json.backup
   ```

---

## ğŸ“š å‚è€ƒèµ„æº

- **Cloudflare D1æ–‡æ¡£**: https://developers.cloudflare.com/d1/
- **Cloudflare Workersæ–‡æ¡£**: https://developers.cloudflare.com/workers/
- **Cloudflare R2æ–‡æ¡£**: https://developers.cloudflare.com/r2/
- **Wrangler CLIæ–‡æ¡£**: https://developers.cloudflare.com/workers/wrangler/

---

**å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬å¼€å§‹è®¨è®ºå¹¶åˆ¶å®šå…·ä½“çš„æ‰§è¡Œè®¡åˆ’ï¼** ğŸš€

